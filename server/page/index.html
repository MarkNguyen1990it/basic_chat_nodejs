<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<style>
/* CSS Document */
body {
  font:12px arial;
  color: #222;
  text-align:center;
  padding:35px; }

form, p, span {
  margin:0;
  padding:0; }

input { font:12px arial; }

a {
  color:#0000FF;
  text-decoration:none; }

  a:hover { text-decoration:underline; }

#wrapper, #loginform {
  margin:0 auto;
  padding-bottom:25px;
  background:#E1E8EF;
  width:504px;
  border:1px solid #ccc; }

#loginform { padding-top:18px; }

#loginform p { margin: 5px; }

#chatbox {
  text-align:left;
  margin:0 auto;
  margin-bottom:25px;
  padding:10px;
  background:#fff;
  height:270px;
  width:430px;
  border:1px solid #ccc;
  overflow:auto; }

#usermsg {
  width:395px;
  border:1px solid #ccc; }

#submit { width: 60px; }

.error { color: #ff0000; }

#menu { padding:12.5px 25px 12.5px 25px; }

.input_message {
  margin-left: 0px; margin-right: 0px; width: 448px;
  margin-bottom: 10px;  
}
.button_submitmsg {
  height: 35px;
  width: 100px;
}

.welcome { float:left; }

.logout { float:right; }

.msgln { margin:0 0 2px 0; }
</style>
<html xmlns="www.marknguyen.com">

<head>
    <title>Chat - Customer Module</title>

</head>
<script type="text/javascript" src="http://localhost:9001/socket.io/socket.io.js"></script>
<div id="wrapper">
    <div id="menu">
        <p class="welcome">Welcome,<input name="name" type="text" id="name" size="63" /><b></b></p>
        <div style="clear:both"></div>
    </div>

    <div id="chatbox"></div>

    <form name="message" action="" >
        <textarea name="message" class="input_message" id="message" size="63"></textarea>
        <input name="submitmsg" class="button_submitmsg" type="button" onclick="sendChat()" id="submitmsg" value="Send" />
    </form>
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
      $(window).keydown(function(event){
        if(event.keyCode == 13) {
          sendChat();
          return false;
        }
      });
    });
    var socket=io.connect('http://localhost:9001');
    function sendChat() {
      var infomation={}
      infomation["name"]=$("#name").val();
      infomation["message"]=$("#message").val();
      socket.emit("input",infomation);
      $("#message").val("");
    }
    socket.on('output', function (data) {
     var message="</br>"+data["name"]+": "+data["message"];
     $("#chatbox").append(message);
     var objDiv = document.getElementById("chatbox");
     objDiv.scrollTop = objDiv.scrollHeight;
     console.log(data);
    });
</script>
</body>

</html>
